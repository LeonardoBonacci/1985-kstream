---
version: '2'
services:
  account-initializer:
   image: leonardobonacci/heroes-account-initializer
   build: account-initializer
   container_name: account-initializer
   depends_on:
     - broker
   environment:
      - SPRING_PROFILES_ACTIVE=docker

  account-store:
    image: leonardobonacci/heroes-account-store
    build: account-store
    depends_on:
      - broker
    ports:
      - "8081-9000:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=kube

  account-transfer:
    image: leonardobonacci/heroes-account-transfer
    build: account-transfer
    container_name: account-transfer
    depends_on:
      - broker
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  simulator:
    image: leonardobonacci/heroes-simulator
    build: simulator
    container_name: simulator
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - FIXED_RATE=1000

  tip-purger:
    image: leonardobonacci/heroes-tip-purger
    build: tip-purger
    container_name: tip-purger
    depends_on:
      - broker
      - cache
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  transfer-ingress:
    image: leonardobonacci/heroes-transfer-ingress
    build: transfer-ingress
    container_name: transfer-ingress
    depends_on:
      - broker
      - cache
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  transfer-processor:
    image: leonardobonacci/heroes-transfer-processor
    build: transfer-processor
    container_name: transfer-processor
    depends_on:
      - broker
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  transfer-pairer:
    image: leonardobonacci/heroes-transfer-pairer
    build: transfer-pairer
    container_name: transfer-pairer
    depends_on:
      - broker
    environment:
      - SPRING_PROFILES_ACTIVE=docker

  transfer-repairer:
    image: leonardobonacci/heroes-transfer-repairer
    build: transfer-repairer
    container_name: transfer-repairer
    depends_on:
      - broker
    environment:
      - SPRING_PROFILES_ACTIVE=docker
